{"remainingRequest":"C:\\xampp\\htdocs\\wida-me\\server\\admin\\node_modules\\babel-loader\\lib\\index.js!C:\\xampp\\htdocs\\wida-me\\server\\admin\\src\\store\\modules\\login.js","dependencies":[{"path":"C:\\xampp\\htdocs\\wida-me\\server\\admin\\src\\store\\modules\\login.js","mtime":1572171545801},{"path":"C:\\xampp\\htdocs\\wida-me\\server\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\wida-me\\server\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.promise\";\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport axios from 'axios';\nvar state = {\n  status: '',\n  token: localStorage.getItem('token') || '',\n  user: {}\n};\nvar getters = {\n  isLoggedIn: function isLoggedIn(state) {\n    return !!state.token;\n  },\n  authStatus: function authStatus(state) {\n    return state.status;\n  }\n};\nvar actions = {\n  login: function login(_ref, user) {\n    var commit = _ref.commit;\n    return new Promise(function (resolve, reject) {\n      // console.log(user);\n      commit('auth_request');\n      axios.post('http://localhost:8086/api/v1/users/login', user).then(function (resp) {\n        var token = resp.data.token;\n        var user = resp.data.user;\n        localStorage.setItem('token', token); // Add the following line:\n\n        axios.defaults.headers.common['Authorization'] = token;\n        commit('auth_success', token, user);\n        resolve(resp);\n      }).catch(function (err) {\n        commit('auth_error');\n        localStorage.removeItem('token');\n        reject(err);\n      });\n    });\n  },\n  register: function register(_ref2, user) {\n    var commit = _ref2.commit;\n    return new Promise(function (resolve, reject) {\n      commit('auth_request');\n      axios({\n        url: 'http://localhost:3000/register',\n        data: user,\n        method: 'POST'\n      }).then(function (resp) {\n        var token = resp.data.token;\n        var user = resp.data.user;\n        localStorage.setItem('token', token); // Add the following line:\n\n        axios.defaults.headers.common['Authorization'] = token;\n        commit('auth_success', token, user);\n        resolve(resp);\n      }).catch(function (err) {\n        commit('auth_error', err);\n        localStorage.removeItem('token');\n        reject(err);\n      });\n    });\n  },\n  logout: function logout(_ref3) {\n    var commit = _ref3.commit;\n    return new Promise(function (resolve, reject) {\n      commit('logout');\n      localStorage.removeItem('token');\n      delete axios.defaults.headers.common['Authorization'];\n      resolve();\n    });\n  }\n};\nvar mutations = {\n  auth_request: function auth_request(state) {\n    state.status = 'loading';\n  },\n  auth_success: function auth_success(state, token, user) {\n    state.status = 'success';\n    state.token = token;\n    state.user = user;\n  },\n  auth_error: function auth_error(state) {\n    state.status = 'error';\n  },\n  logout: function logout(state) {\n    state.status = '';\n    state.token = '';\n  }\n};\nexport default {\n  state: state,\n  getters: getters,\n  mutations: mutations,\n  actions: actions\n};",{"version":3,"sources":["C:\\xampp\\htdocs\\wida-me\\server\\admin\\src\\store\\modules\\login.js"],"names":["Vue","Vuex","axios","state","status","token","localStorage","getItem","user","getters","isLoggedIn","authStatus","actions","login","commit","Promise","resolve","reject","post","then","resp","data","setItem","defaults","headers","common","catch","err","removeItem","register","url","method","logout","mutations","auth_request","auth_success","auth_error"],"mappings":"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","sourcesContent":["import Vue from 'vue';\r\nimport Vuex from 'vuex';\r\nimport axios from 'axios';\r\n\r\nconst state = {\r\n  status: '',\r\n  token: localStorage.getItem('token') || '',\r\n  user: {}\r\n};\r\n\r\nconst getters = {\r\n  isLoggedIn: state => !!state.token,\r\n  authStatus: state => state.status\r\n};\r\nconst actions = {\r\n  login({ commit }, user) {\r\n    return new Promise((resolve, reject) => {\r\n     // console.log(user);\r\n      commit('auth_request');\r\n      axios\r\n        .post('http://localhost:8086/api/v1/users/login', user)\r\n        .then(resp => {\r\n          const token = resp.data.token;\r\n          const user = resp.data.user;\r\n          localStorage.setItem('token', token);\r\n          // Add the following line:\r\n          axios.defaults.headers.common['Authorization'] = token;\r\n          commit('auth_success', token, user);\r\n          resolve(resp);\r\n        })\r\n        .catch(err => {\r\n          commit('auth_error');\r\n          localStorage.removeItem('token');\r\n          reject(err);\r\n        });\r\n    });\r\n  },\r\n  register({ commit }, user) {\r\n    return new Promise((resolve, reject) => {\r\n      commit('auth_request');\r\n      axios({\r\n        url: 'http://localhost:3000/register',\r\n        data: user,\r\n        method: 'POST'\r\n      })\r\n        .then(resp => {\r\n          const token = resp.data.token;\r\n          const user = resp.data.user;\r\n          localStorage.setItem('token', token);\r\n          // Add the following line:\r\n          axios.defaults.headers.common['Authorization'] = token;\r\n          commit('auth_success', token, user);\r\n          resolve(resp);\r\n        })\r\n        .catch(err => {\r\n          commit('auth_error', err);\r\n          localStorage.removeItem('token');\r\n          reject(err);\r\n        });\r\n    });\r\n  },\r\n  logout({ commit }) {\r\n    return new Promise((resolve, reject) => {\r\n      commit('logout');\r\n      localStorage.removeItem('token');\r\n      delete axios.defaults.headers.common['Authorization'];\r\n      resolve();\r\n    });\r\n  }\r\n};\r\n\r\nconst mutations = {\r\n  auth_request(state) {\r\n    state.status = 'loading';\r\n  },\r\n  auth_success(state, token, user) {\r\n    state.status = 'success';\r\n    state.token = token;\r\n    state.user = user;\r\n  },\r\n  auth_error(state) {\r\n    state.status = 'error';\r\n  },\r\n  logout(state) {\r\n    state.status = '';\r\n    state.token = '';\r\n  }\r\n};\r\nexport default {\r\n  state,\r\n  getters,\r\n  mutations,\r\n  actions\r\n};\r\n"]}]}